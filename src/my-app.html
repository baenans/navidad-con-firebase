<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/polymerfire/firebase-app.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">

<link rel="import" href="my-icons.html">
<link rel="import" href="magic-queen.html">
<link rel="import" href="bit-element.html">

<dom-module id="my-app">
  <template>
    <style>
      :host {
        --app-primary-color: #4285f4;
        --app-secondary-color: black;

        display: block;
      }

      h1{
        text-align: center;
        font-size: 45px;
        font-weight: 100;
        margin-bottom: 0px;
      }

      h2{
        text-align: center;
        font-weight: 100;
        font-style: italic;
      }

      header{
        text-align: center;
        padding: 20px 150px;
        margin: 0 auto;
        font-size: 25px;
        font-weight: 100; 
        max-width: 710px;
      }

      #magic-queens{
        display: flex;
        text-align: center;
        flex-wrap: wrap;
        margin: 0px auto;
        max-width: 800px
      }

      .hashtag{
        font-size: 20px;
        font-weight: 700
      }

      #c4as{
        margin: 50px 0;
      }
      a,
      a:link,
      a:active,
      a:hover{
        color: #FFA000;
      }

      #c4as a,
      #c4as a:link,
      #c4as a:active,
      #c4as a:hover{
        text-decoration: none;
        font-size: 18px;
        font-weight: 500;
      }

      main{
        text-align: center;
        max-width: 800px;
        margin: 0 auto;
      }

      footer{
        text-align: center;
        padding: 20px 150px;
      }

      #ss-nn{
        margin: 20px auto;
      }
      #ss-nn a{
        text-decoration: none;
      }
      #ss-nn img{
        height: 40px;
        margin:0px 5px;
      }

      @media all and (max-width: 800px){
        h1{
          font-size: 30px;
          margin-top: 10px;
        }

        header{
          text-align: center;
          padding: 20px 60px;
          font-size: 20px;
          font-weight: 100; 
        }

        #magic-queens{
          flex-flow: column;
        }

        footer{
          padding: 0px 0px;
        }
      }

    </style>

    <firebase-app 
      name="navidad-con-firebase"
      database-url="https://navidad-con-firebase.firebaseio.com"
      auth-domain="navidad-con-firebase.firebaseapp.com"
      api-key="AIzaSyDvpi4o29dhIq5RkPWNriAv3N-Mvlv_rU0">
    </firebase-app>

    <firebase-query
      id="kings-query"
      app-name="navidad-con-firebase"
      path="/kings"
      data="{{kings}}">
    </firebase-query>
    
    <firebase-query
      id="bits-query"
      app-name="navidad-con-firebase"
      path="/bits"
      data="{{bits}}">
    </firebase-query>

    <h1>üéÑ Navidad con Firebase üéÅ</h1>
    <header>
      <p>
        Presta atenci√≥n en diciembre para aprender Firebase con Carlos, Jeff, Paola y Kike ‚Äì tus <i>reyes m√°gicos</i> del desarrollo.
      </p>

      <div id="c4as">
        <a href="https://g.co/firebase/bits">
          <paper-button raised on-tap="_clickDocumentation">Documentaci√≥n</paper-button>
        </a>
        <a href="https://g.co/codelabs/firebasebits">
          <paper-button raised on-tap="_clickCodelabs">Codelabs</paper-button>
        </a>
      </div>

      <div class="hashtag">#navidadconfirebase</div>
    </header>

    <main>
      <template 
        is="dom-repeat"
        items="[[bits]]"
        as="bit"
        sort="_sort">

        <bit-element 
          bit="[[bit]]">
        </bit-element>
      
      </template>
        

    </main>

    <h2>Los Reyes M√°gicos</h2>
    <div id="magic-queens">
      <template
        is="dom-repeat"
        items="[[kings]]"
        as="king">

        <magic-queen
          data="[[king]]"></magic-queen>
          
      </template>
      
    </div>

    <footer>
      <p>
        <div class="hashtag">#navidadconfirebase</div>
        <div id="ss-nn">
          <a href="https://plus.google.com/share?url=[[url]]" target=_blank rel="noopener">
            <img alt="Google Plus" src="https://www.gstatic.com/images/icons/gplus-128.png">
          </a>
          <a href="https://www.facebook.com/sharer/sharer.php?u=[[url]]" target=_blank rel="noopener">
            <img alt="Facebook" src="/images/facebook.png">
          </a>
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=[[url]]&title=Navidad%20con%20Firebase&summary=Presta%20atenci%C3%B3n%20en%20diciembre%20para%20aprender%20Firebase%20con%20Carlos,%20Jeff,%20Paola%20y%20Kike%20%E2%80%93%20tus%20reyes%20m%C3%A1gicos%20del%20desarrollo." target=_blank rel="noopener">
            <img alt="LinkedIn" src="/images/linkedin.png">
          </a>
          <a href="https://twitter.com/intent/tweet?text=[[url]]%20%23navidadconfirebase" target=_blank rel="noopener">
            <img alt="Twitter" src="/images/twitter.png">
          </a>
      </div>
      
    </footer>

  </template>

  <script>
    Polymer({
      is: 'my-app',

      properties: {
        url:{
          type: String,
          value: 'navidadconfirebase.es'
        },
        bits: {
          type: Array,
          value: function(){
            return [];
          }
        },
        kings: {
          type: Array,
          value: function(){
            return [
              {
                nombre: 'Carlos Azaustre',
                puesto: 'CTO en Chefly',
                imagen: 'https://firebasestorage.googleapis.com/v0/b/navidad-con-firebase.appspot.com/o/profiles%2Fcarlos-azaustre.jpg?alt=media&token=a316628d-7619-4091-af53-2950f6eb1bf1'
              },
              {
                nombre: 'Jeff Arese',
                puesto: 'Frontend Engineer en Wallapop',
                imagen: 'https://firebasestorage.googleapis.com/v0/b/navidad-con-firebase.appspot.com/o/profiles%2Fjeff-arese.jpg?alt=media&token=ed9fb0cb-74e0-43f8-af18-0d28a5054f2d'
              },
              {
                nombre: 'Paola Garc√≠a',
                puesto: 'CEO de Chefly',
                imagen: 'https://firebasestorage.googleapis.com/v0/b/navidad-con-firebase.appspot.com/o/profiles%2Fpaola-garcia.jpg?alt=media&token=55306826-118e-468e-84d8-53cc733f1f87'
              },
              {
                nombre: 'Kike Garc√≠a',
                puesto: '',
                imagen: 'https://firebasestorage.googleapis.com/v0/b/navidad-con-firebase.appspot.com/o/profiles%2Fkike-garcia.jpg?alt=media&token=a5f13310-c4d0-448c-ac91-87241aee93b5'
              }
            ];
          }
        }
      },

      _sort: function(a, b) {
        // usign the $key attribute of firebase
        // to inversely sort the bits
        return a.$key > b.$key ? -1 : 1;
      },

      _clickCodelabs: function(){
        if (window.ga){
          ga('send', 'event', 'fb-button', 'click', 'codelabs');
        }
      },

      _clickDocumentation: function(){
        if (window.ga){
          ga('send', 'event', 'fb-button', 'click', 'documentation');
        }
      }

    });
  </script>
</dom-module>
